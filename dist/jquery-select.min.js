/*! jquery select - v0.1.0 - 2013-10-09
* https://github.com/amazingSurge/jquery-select
* Copyright (c) 2013 amazingSurge; Licensed MIT */
(function(t){var e=t.select=function(s,i){var n,a={};this.element=s,this.$element=t(s).css({display:"none"})||t("<div></div>"),this.$options=this.$element.find("option"),this.$optgroups=this.$element.find("optgroup"),this.status={},a.status={},0!==this.$optgroups.length&&t.each(this.$optgroups,function(e,s){var i=t(s).attr("label");a.status[i]={},t.each(t(s).find("option"),function(e,s){a.status[i][t(s).attr("value")]={},a.status[i][t(s).attr("value")].text=t(s).text(),t(s).prop("selected")&&(a.value=t(s).attr("value"))})}),n=this.$element.find("> option"),0!==n.length&&t.each(n,function(e,s){a.status[t(s).attr("value")]={},a.status[t(s).attr("value")].text=t(s).text(),t(s).prop("selected")&&(a.value=t(s).attr("value"))}),this.options=t.extend(!0,{},e.defaults,i,a),this.namespace=this.options.namespace,this.value=this.options.value,this.status=this.options.status,this.disbaled=this.options.disbaled||!1,this.opened=!1,this.eventBinded=!1,this.init()};e.prototype={constructor:e,init:function(){var e=this,s='<div class="'+this.namespace+'"><div class="'+this.namespace+'-trigger"><span></span><i></i></div><ul class="'+this.namespace+'-dropdown"></ul></div>';this.$select=t(s).css({position:"relative"}),this.$trigger=this.$select.find("."+this.namespace+"-trigger"),this.$dropdown=this.$select.find("."+this.namespace+"-dropdown").css({display:"none"}),null!==this.options.skin&&this.$select.addClass(this.namespace+"_"+this.options.skin),t.each(this.status,function(s,i){if(i.text){var n=t("<li><a></a></li>").data("value",s).find("a").text(i.text).end();t("<i></i>").addClass(i.icon).appendTo(n),e.$dropdown.append(n)}else{var a=t('<li class="'+e.namespace+'-group"></li>').text(s);e.$dropdown.append(a),t.each(i,function(s,i){var n=t('<li class="'+e.namespace+'-group-item"><a></a></li>').data("value",s).find("a").text(i.text).end();e.$dropdown.append(n)})}}),this.$element.after(this.$select),this.$li=this.$dropdown.find("li"),this.options.disbaled===!0?this.$trigger.addClass(this.namespace+"_disbaled"):this.bindEvent(),this.set(this.value),this.$element.trigger("select::ready",this)},bindEvent:function(){var e=this;"click"===this.options.trigger?this.$trigger.on("click.select",function(){return e.position.call(e),e.opened===!0?e.hide.call(e):e.show.call(e),!1}):(this.$trigger.on("mouseenter.select",function(){return e.position.call(e),e.show.call(e),!1}),this.$select.on("mouseleave.select",function(){return e.hide.call(e),!1})),this.$dropdown.delegate("li","mouseenter.select",function(){return e.$element.trigger("select::option::mouseenter",e),!1}).delegate("li","mouseleave.select",function(){return e.$element.trigger("select::option::mouseleave",e),!1}).delegate("li","click.select",function(){var s=t(this).data("value");return void 0===s?!1:(e.set.call(e,s),!1)}),this.eventBinded=!0},unbindEvent:function(){this.$dropdown.undelegate(".select"),this.$trigger.off(".select"),this.$select.off(".select"),this.eventBinded=!1},position:function(){var e,s=this.$trigger.outerHeight(!0),i=this.$trigger.offset(),n=this.$dropdown.outerHeight(!0);e=n+i.top>t(window).height()+t(window).scrollTop()?-n-parseInt(this.options.offset[0],10):s+parseInt(this.options.offset[0],10),this.$dropdown.css({position:"absolute",top:e,left:0})},set:function(e){var s=this;this.$li.removeClass(this.namespace+"_selected"),this.value=e,t.each(this.$options,function(s,i){t(i).attr("value")===e&&t(i).prop("selected",!0)}),t.each(this.$li,function(i,n){t(n).data("value")===e&&(t(n).addClass(s.namespace+"_selected"),s.$trigger.find("span").text(t(n).find("a").text()),t.isFunction(s.options.onChange)&&s.options.onChange(s),s.$select.trigger("change",s))}),this.hide(),this.$element.trigger("select::change",this)},get:function(){var e,s=this;return t.each(this.$options,function(i,n){t(n).attr("value")===s.value&&(e=t(n).text())}),e},show:function(){return this.$dropdown.css({display:"block"}),this.$trigger.addClass(this.namespace+"_active"),t(document).on("click.select",t.proxy(this.hide,this)),this.opened=!0,this.$element.trigger("select::show",this),this},hide:function(){return this.$dropdown.css({display:"none"}),this.$trigger.removeClass(this.namespace+"_active"),t(document).off("click.select"),this.opened=!1,this.$element.trigger("select::hide",this),this},val:function(t){return t?(this.set(t),this):this.get()},enable:function(){return this.disbaled=!1,this.$trigger.removeClass(this.namespace+"_disbaled"),this},disable:function(){return this.disbaled=!0,this.$trigger.addClass(this.namespace+"_disbaled"),this},destroy:function(){this.$trigger.off(".select")}},e.defaults={namespace:"select",skin:null,trigger:"click",value:"a",offset:[10,0],onChange:function(){}},t.fn.select=function(s){if("string"==typeof s){var i=s,n=arguments.length>1?Array.prototype.slice.call(arguments,1):void 0;return this.each(function(){var e=t.data(this,"select");"function"==typeof e[i]&&e[i].apply(e,n)})}var a=s||{};return a.$group=this,this.each(function(){t.data(this,"select")||t.data(this,"select",new e(this,a))})}})(jQuery);