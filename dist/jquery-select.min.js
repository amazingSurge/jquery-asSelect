/*! jquery select - v0.1.0 - 2013-07-23
* https://github.com/amazingSurge/jquery-select
* Copyright (c) 2013 joeylin; Licensed MIT */
(function(t){var e=t.select=function(s,i){var n,a={};this.element=s,this.$element=t(s).css({display:"none"})||t("<div></div>"),this.$options=this.$element.find("option"),this.$optgroups=this.$element.find("optgroup"),this.status={},a.status={},0!==this.$optgroups.length&&t.each(this.$optgroups,function(e,s){var i=t(s).attr("label");a.status[i]={},t.each(t(s).find("option"),function(e,s){a.status[i][t(s).attr("value")]={},a.status[i][t(s).attr("value")].text=t(s).text(),t(s).prop("selected")&&(a.value=t(s).attr("value"))})}),n=this.$element.find("> option"),0!==n.length&&t.each(n,function(e,s){a.status[t(s).attr("value")]={},a.status[t(s).attr("value")].text=t(s).text(),t(s).prop("selected")&&(a.value=t(s).attr("value"))}),this.options=t.extend(!0,{},e.defaults,i,a),this.namespace=this.options.namespace,this.value=this.options.value,this.status=this.options.status,this.opened=!1,this.init()};e.prototype={constructor:e,init:function(){var e=this,s='<div class="'+this.namespace+" "+this.options.skin+'"><div class="'+this.namespace+'-bar"><span></span><i></i></div><ul class="'+this.namespace+'-content"></ul></div>';this.$select=t(s),this.$bar=this.$select.find("."+this.namespace+"-bar"),this.$content=this.$select.find("."+this.namespace+"-content").css({display:"none"}),t.each(this.status,function(s,i){if(i.text){var n=t("<li><a></a></li>").data("value",s).find("a").text(i.text).end();t("<i></i>").addClass(i.icon).appendTo(n),e.$content.append(n)}else{var a=t('<li class="'+e.namespace+'-group"></li>').text(s);e.$content.append(a),t.each(i,function(s,i){var n=t('<li class="'+e.namespace+'-group-item"><a></a></li>').data("value",s).find("a").text(i.text).end();e.$content.append(n)})}}),this.$element.after(this.$select),this.$li=this.$content.find("li"),"click"===this.options.trigger?this.$bar.on("click.select",function(){return e.position.call(e),e.opened===!0?e.hide.call(e):e.show.call(e),!1}):(this.$bar.on("mouseenter.select",function(){return e.position.call(e),e.show.call(e),!1}),this.$select.on("mouseleave.select",function(){return e.hide.call(e),!1})),this.$content.delegate("li","click",function(){var s=t(this).data("value");return void 0===s?!1:(e.set.call(e,s),!1)}),this.set(this.value)},position:function(){var e,s=this.$bar.outerHeight(!0),i=this.$bar.offset(),n=this.$content.height();e=n+i.top>t(window).height()+t(window).scrollTop()?-n-parseInt(this.options.offset[0],10):s+parseInt(this.options.offset[0],10),this.$content.css({position:"absolute",top:e,left:0})},show:function(){return this.$content.css({display:"block"}),this.$bar.addClass(this.namespace+"_active"),t(document).on("click.select",t.proxy(this.hide,this)),this.opened=!0,this},hide:function(){return this.$content.css({display:"none"}),this.$bar.removeClass(this.namespace+"_active"),t(document).off("click.select"),this.opened=!1,this},set:function(e){var s=this;this.$li.removeClass(this.namespace+"_selected"),this.value=e,t.each(this.$options,function(s,i){t(i).attr("value")===e&&t(i).prop("selected",!0)}),t.each(this.$li,function(i,n){t(n).data("value")===e&&(t(n).addClass(s.namespace+"_selected"),s.$bar.find("span").text(t(n).find("a").text()),t.isFunction(s.options.onChange)&&s.options.onChange(s),s.$select.trigger("change",s))}),this.hide()},get:function(){var e,s=this;return t.each(this.$options,function(i,n){t(n).attr("value")===s.value&&(e=t(n).text())}),e},enable:function(){return this.enabled=!0,this.$bar.addClass(this.namespace+"enabled"),this},disable:function(){return this.enabled=!1,this.$bar.removeClass(this.namespace+"enabled"),this},destroy:function(){this.$bar.off(".select")}},e.defaults={namespace:"select",skin:"simple",trigger:"click",value:"a",offset:[0,0],onChange:function(){}},t.fn.select=function(s){if("string"==typeof s){var i=s,n=arguments.length>1?Array.prototype.slice.call(arguments,1):void 0;return this.each(function(){var e=t.data(this,"select");"function"==typeof e[i]&&e[i].apply(e,n)})}var a=s||{};return a.$group=this,this.each(function(){t.data(this,"select")||t.data(this,"select",new e(this,a))})}})(jQuery);